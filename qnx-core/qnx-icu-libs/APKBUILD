pkgname="qnx-icu-libs"
_charconv_version="0.0.1.00135T202311191043L"
pkgver=8.0.3
pkgrel=0
pkgdesc="QNX libiconv"
url="https://qnx.com"
arch="all"
license="LicenseRef-QDL-Non-Commercial"
depends=""
options="!strip !tracedeps"
source="charvonc_$_charconv_version=.qpkg::$QSC_URL/com.qnx.qnx800.target.text.charconv/$_charconv_version/download
"
_qarch=$CARCH
if [[ $CARCH == "aarch64" ]]; then
    export _qarch=aarch64le
fi

prepare() {
   for qpkg in *.qpkg; do
        tar xf $qpkg
   done
}

# extglob for trimming out other arch's toolchain
shopt -s extglob
package() {
    mkdir -p "$pkgdir"/usr/lib
    echo "Moving arch-specific ($_qarch) /usr/lib/libiconv.so.1"
    cp -r "$srcdir"/target/qnx/$_qarch/usr/lib/libiconv.so.1 "$pkgdir"/usr/lib
}

sha512sums="
e431adc4c400ee69d059594f3ae7b53796bd847dc3ec9bf4494f8b7e11d0ba22317919c9f60da70ccdd87575ddf95181e359ced265c2ddb7f7c32b9f87bdcfef  charvonc_0.0.1.00135T202311191043L=.qpkg
"
